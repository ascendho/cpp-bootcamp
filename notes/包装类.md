## 包装类

- 包装类是一种设计模式，用于封装和管理资源（内存、文件、网络连接等）的类。它充当资源和其它部分之间的“包装器”或“管理者”
- 包装类通常禁止拷贝，避免多个对象管理同一资源；支持移动语义，转移资源的所有权
- `std::unique_ptr<T>`、`std::shared_ptr<T>`、`std::lock_guard<Mutex>`、`std::fstream`是C++标准库中的包装类示例
- RAII（资源获取即初始化）是一种C++编程技术，核心思想是将资源与对象生命周期绑定，实现自动、安全、高效的资源管理
- `const` 关键字表示这是一个常量成员函数，不会修改对象的状态，承诺不改变任何成员变量，是一个只读操作，其中 `this` 指针的类型是 `const IntPtrManager*` ，如：

```c++
		// Getter function.
    int GetVal() const {
      return *ptr_;
    }
```

- 分析这段代码：

```c++
 		// Move assignment operator for this wrapper class. Similar techniques as
    // the move constructor.
    IntPtrManager &operator=(IntPtrManager &&other) {
      if (ptr_ == other.ptr_) {
        return *this;
      }
      if (ptr_) {
        delete ptr_;
      }
      ptr_ = other.ptr_;
      other.ptr_ = nullptr;
      return *this;
    }
```

首先进行自赋值检查，虽然不常见，但技术上可能发生；然后释放当前资源，防止内存泄漏；最后将源对象的资源转移到当前对象，并使源对象无效，防止双重删除